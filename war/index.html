<html>
<title>ligtran</title>
<script type="text/javascript" src="http://www.mochikit.com/packed/MochiKit/MochiKit.js"></script>
<script type="text/javascript">
function convert(path, from, to) {
  var old = $(to).value;
  return loadJSONDoc(path, {'str': $(from).value}).addCallback(function(ret){
   $(to).value = ret.return + $(to).value.slice(old.length);
  });
}
function copy_all(path){
  var text_val=$(path);
  text_val.focus();
  text_val.select();
  if (!document.all) return; // IE only
  r = text_val.createTextRange();
  r.execCommand('copy');
}
function count(path, pathc) {
  var s = $(path).value;
  $(pathc).value = s.length;
}
var current = 'ligature';
function set(x) {
  current = x;
}
function get_servlet() { return current; }
</script>
</script>
<style type="text/css">
h1 { text-align: center; }
body { width: 40em; margin: auto; }
textarea{ width: 90%; height: 6em; font-size: 150%; }
.counter{ border: none; width: 10%; float: right; font-size: 200%; text-align: right; }
</style>

<h1><img src="http://www.twitlogo.com/c/b7bb40c3c1ba67cd92899e298f6469f4.png" title="ligtran"/></h1>

<form>
  <input type="radio" name="inst" id="short" checked="true" onclick="set('ligature')"/>
<label for="short">短く</label>
  <input type="radio" name="inst" id="long" onclick="set('ligature/reverse')"/>
  <label for="long">長く</label>
</form>

<input class="counter" id="editc" type="text" readonly="true"/>
<textarea id="edit" onkeyup="convert(get_servlet(), 'edit', 'result').addCallback(function(){count('edit', 'editc'); count('result', 'resultc');});"></textarea><br/>
<input class="counter" id="resultc" type="text" readonly="true"/>
<textarea id="result" readonly="true" onclick="copy_all('result')"></textarea>

</html>
